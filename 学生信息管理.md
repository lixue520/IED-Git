# 图书管理系统

##### 1.项目简述

- 项目介绍：使用Java和swing实现图书管理系统桌面程序、功能有图书添加、图书类别维护、图书添加、图书维护等。
- 使用软件：Intellij IDEA 2021.3.1 编写代码、Navicat for Mysql  
- 运行环境：JDK 8 、Mysql 8
- 第三方包：mysql驱动工具包 cloud-mysql-connector-java-8.0.26-bin.jar
- 功能描述：
  - 图书类别添加
  - 图书类别维护
  - 图书添加
  - 图书维护
  - 其他模块

##### 2.数据库设计

- 数据库结构 BookSystemDB：

  - 登录表-LogTable:

    ```mysql
    //建表查询
    CREATE TABLE `LogTable` (
      `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '编号',
      `name` varchar(50) NOT NULL COMMENT '用户名',
      `nick_name` varchar(150) DEFAULT NULL COMMENT '昵称',
      `avatar` varchar(150) DEFAULT NULL COMMENT '头像',
      `password` varchar(100) DEFAULT NULL COMMENT '密码',
      `salt` varchar(40) DEFAULT NULL COMMENT '加密盐',
      `email` varchar(100) DEFAULT NULL COMMENT '邮箱',
      `mobile` varchar(100) DEFAULT NULL COMMENT '手机号',
      `status` tinyint(4) DEFAULT NULL COMMENT '状态  0：禁用   1：正常',
      `create_by` varchar(50) DEFAULT NULL COMMENT '创建人',
      `create_time` datetime DEFAULT NULL COMMENT '创建时间',
      `last_update_by` varchar(50) DEFAULT NULL COMMENT '更新人',
      `last_update_time` datetime DEFAULT NULL COMMENT '更新时间',
      `del_flag` tinyint(4) DEFAULT '0' COMMENT '是否删除  -1：已删除  0：正常',
      PRIMARY KEY (`id`),
      UNIQUE KEY `name` (`name`)
    ) ENGINE=InnoDB AUTO_INCREMENT=34 DEFAULT CHARSET=utf8 COMMENT='用户管理';
    //插入查询
    INSERT INTO `LogTable` (`id`,`name`,`password`) VALUES ('1','Tom','T123');
    INSERT INTO `LogTable` (`id`,`name`,`password`) VALUES ('2','Jack','J123');
    
    ```
  
  - 图书表-BookTable:
  
    ```mysql
    //建表查询
    DROP TABLE IF EXISTS for `BookTable`;
    CREATE TABLE `BookTable`(
      `bid` int(11) NOT NULL AUTO_INCREMENT COMMENT '图书ID',
      `bookname` varchar(40) NOT NULL COMMENT '图书名称',
      `bauthor` varchar(20) NOT NULL COMMENT '作者姓名',
      `bsex` varchar(20) NOT NULL COMMENT '作者性别',
      `bprice` float NOT NULL COMMENT '价格',
      `bookdescription` varchar(1000) NOT NULL COMMENT '描述',
      `btid` int(12) NOT NULL COMMENT '图书类别ID',
      PRIMARY KEY (`bid`),
      KEY `btid` (`btid`),
      FOREIGN KEY (`btid`) REFERENCES `TypeTable` (`btid`)
    ) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=utf8;
    //插入查询
    INSERT INTO `BookTable` VALUES ('1','书名','作者姓名','男','33.5','描述','1');
    INSERT INTO `BookTable` VALUES ('2','金瓶梅','蔡坤坤','男','66.6','解密古代宫廷秘史','2');
    ```

  - 图书类表-TypeTable:
  
    ```MySQL
    //建表查询
    DROP TABLE IF EXISTS `TypeTable`;
    CREATE TABLE `TypeTable`(
      `btid` int(12) NOT NULL AUTO_INCREMENT COMMENT '图书类别ID,自动增长',
      `btName` varchar(40) NOT NULL COMMENT '图书类别名称',
      `btdescription` varchar(1000) NOT NULL COMMENT '图书类别描述',
      PRIMARY KEY ('btid')
    )ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8;
    //插入查询
    INSERT INTO `TypeTable` VALUES ('1','科学书籍','古代科学类');
    INSERT INTO `TypeTable` VALUES ('2','科学与金瓶梅','解密古代宫廷秘史');
    ```
    
    

##### 3.JFormDesigner插件介绍

- 应用JFormDesigner插件
  - Components 组件
    - Label 标签
    - TextField 文本域
    - ComboBox 组合框
    - Button  按求
    - CheckBox 复选框
    - RadioBox 单选框
    - ToggleButton 切换按钮
    - TextArea 文本区
    - FormattedTextField 格式化文本字段
    - PasswordField 密码字段
    - TextPane 文本窗格
    - EditorPane 编辑器窗格
    - Spinner 微调器
    - List 列表
    - Table 桌子
    - Tree 树
    - ProgressBar 进度条
    - ScrollBar 滚动条
    - Separator 分隔器
    - Slider 滑块
    - Horizontal Spacer 水平垫片
    - Vertical Spacer 垂直垫片
  - Containers 容器
    - Panel 控制板
    - TabbedPane 选项卡式窗格
    - ScrollPane 滚动窗格
    - SplitPane 差分窗格
    - ToolBar 工具栏
    - ToolBar Separator 工具类分割符
    - DesktopPane 获取桌面
    - InternalFrame 内部框架
    - ScrollBar 滚动条
  - Windows 视窗
    - Dialog 对话
    - Frame
    - Window
  - Menus 菜单
    - MenuBar 菜单栏
    - Menu
    - Menultem 菜单项
    - CheckBoxMenultem 复选框菜单项
    - RadioButtonMenultem 单选按钮菜单项
    - Menu Separator 菜单分割符
    - PopupMenu 跳出菜单
  - Goodies 好东西
    - Label 标题
    - Titled Separator 标题分隔符
    - Title 标题
  - Binding 捆绑
    - List
    - ObservableList 可观察列表
    - ObservableMap 可观察字典
  - Custom 风俗

- 插件应用：在左边选就行了

##### 4.登录界面设计

总设计：通过文本框输入的字符串对比数据库确定是否登录，登录成功跳到图书管理主页。

- 设计登录界面
- 数据库连接测试
- 查询数据库登录关键字段
- 判断登录字段，是-->主页，否-->错误提示字段

```java
//窗体控制关键代码
this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); //默认关闭操作
this.setResizable(false);  //设置可调大小
this.setVisible(true);  //设置可见的

//组件大小尺寸
label1(55,45)
textField1(140,45,120,25)
label2(65,80)
textField2(140,75,110,25)
button1(165,130)
contentPanne.setPreferredSize(400,300)
  
//关于按钮与动态响应
button1.setText("登录");   //设置按钮标签
button1.addActionListener(a->{}); //添加动作监听器
contentPane.add(button1);  //将按钮添加进（内容窗格）
button1.setBounds(new Rectangle(new Point(160),button1.getPreferredSize())) //设置按钮界限（Bounds）\形态（矩形） \方位（Point）\尺寸（获取首选尺寸）

//监听并测试数据库
a->{
  //测试数据库
  Connection conn = null;
  String name = "root";
  String password="123456";
  String url = ""jdbc:mysql://localhost:3306/booksystemdb?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true"";
  
  conn = DriverManager.getConnection(url,user,dbPassword);
  System.out.println("数据库连接到: "+conn);
}

//针对监听事件添加登录判断
//查询操作-->登录判断-->是-->打印登录成功
//-->否-->打印登录失败
String username = textField1.getText();
String password = textField2.getText();
String sql="SELECT * FROM logtable WHERE name='"+username+"' AND password='"+password+"'";

Statement statement = null;  //语句对象
ResultSet rs = null;    //利用获得的语句对象得到数据库游标对象

statement = conn.createStatement();  //连接对象获取语句对象
rs = statement.executeQuery(sql);   //语句对象使用查询语句得到游标对象
//执行完查询时，游标不指向任何记录；

//游标操作
if(rs.next()){
  System.out.pritln("登陆成功");
}else{
  System.out.println("登录失败");
}

```

##### 5.主页设计

##### 6.设计细节





